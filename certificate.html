<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Certificado ‚Äî CyberDoom Chile</title>
  <style>
    :root{--ink:#0b1c2d;--muted:#425466;--accent:#1aa37a;}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;background:#f6f8fb;color:var(--ink);}
    .page{max-width:920px;margin:24px auto;padding:18px;}
    .card{background:white;border:1px solid rgba(0,0,0,.12);border-radius:18px;box-shadow:0 18px 50px rgba(0,0,0,.08);overflow:hidden}
    .top{padding:18px 18px 10px 18px;border-bottom:1px solid rgba(0,0,0,.10);display:flex;justify-content:space-between;gap:12px;align-items:flex-start}
    .brand{display:flex;gap:10px;align-items:center}
    .dot{width:12px;height:12px;border-radius:50%;background:var(--accent)}
    h1{margin:0;font-size:18px}
    .meta{color:var(--muted);font-size:12px;margin-top:4px}
    .body{padding:22px}
    .cert{border:2px solid rgba(26,163,122,.35);border-radius:16px;padding:18px}
    .big{font-size:28px;font-weight:900;letter-spacing:.2px;margin:6px 0}
    .row{display:flex;flex-wrap:wrap;gap:10px;margin-top:12px}
    .pill{border:1px solid rgba(0,0,0,.12);border-radius:999px;padding:8px 10px;font-size:12px;background:#fbfcff}
    .sign{display:flex;gap:18px;flex-wrap:wrap;margin-top:22px}
    .sig{flex:1;min-width:220px;border-top:1px solid rgba(0,0,0,.18);padding-top:10px;color:var(--muted);font-size:12px}
    .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:16px}
    button{border:1px solid rgba(0,0,0,.14);background:white;border-radius:12px;padding:10px 12px;cursor:pointer}
    button.primary{background:rgba(26,163,122,.10);border-color:rgba(26,163,122,.35);font-weight:800}
    @media print{
      body{background:white}
      .actions{display:none}
      .page{margin:0;max-width:none}
      .card{box-shadow:none;border:none}
    }
  </style>
</head>
<body>
  <div class="page">
    <div class="card">
      <div class="top">
        <div class="brand">
          <div class="dot"></div>
          <div>
            <h1>Certificado de finalizaci√≥n ‚Äî CyberDoom Chile</h1>
            <div class="meta">Desarrollado por <b>VibecodingChile</b> y <b>Mat√≠as Rojas Fa√∫ndez</b></div>
          </div>
        </div>
        <div class="meta" id="certId">ID: ‚Äî</div>
      </div>

      <div class="body">
        <div class="cert">
          <div class="meta">Se certifica que</div>
          <div class="big" id="playerName">‚Äî</div>
          <div class="meta">complet√≥ satisfactoriamente el m√≥dulo de capacitaci√≥n interactiva en</div>
          <div class="big" style="font-size:22px">Ciberseguridad y Protecci√≥n de Datos (Chile)</div>
          <div class="row">
            <div class="pill">Fecha: <span id="date">‚Äî</span></div>
            <div class="pill">Puntaje: <span id="score">‚Äî</span></div>
            <div class="pill">Tiempo: <span id="time">‚Äî</span></div>
            <div class="pill">Nivel: <span id="level">‚Äî</span></div>
          </div>

          <div class="meta" style="margin-top:12px">
            Este certificado es generado en el navegador (modo est√°tico). Para validaci√≥n corporativa, se recomienda integrar portal con emisi√≥n y verificaci√≥n en servidor.
          </div>

          <div class="sign">
            <div class="sig">
              VibecodingChile<br/>
              Direcci√≥n Acad√©mica / Capacitaci√≥n
            </div>
            <div class="sig">
              Mat√≠as Rojas Fa√∫ndez<br/>
              Desarrollo / Contenidos
            </div>
          </div>
        </div>

        <div class="actions">
          <button class="primary" onclick="window.print()">üñ®Ô∏è Imprimir / Guardar PDF</button>
          <button onclick="window.close()">Cerrar</button>
        </div>
      </div>
    </div>
  </div>

<script>
(function(){
  // Data from localStorage or querystring
  const params = new URLSearchParams(location.search);
  const payload = (()=>{
    try{
      const fromLS = localStorage.getItem("cyberdoom_last_certificate");
      return fromLS ? JSON.parse(fromLS) : null;
    }catch{return null}
  })();

  const p = payload || {};
  const name = params.get("name") || p.name || "‚Äî";
  const score = params.get("score") || p.score || "‚Äî";
  const time = params.get("time") || p.time || "‚Äî";
  const level = params.get("level") || p.level || "‚Äî";
  const id = params.get("id") || p.id || "‚Äî";
  const date = params.get("date") || p.date || new Date().toLocaleDateString("es-CL");

  document.getElementById("playerName").textContent = name;
  document.getElementById("score").textContent = score;
  document.getElementById("time").textContent = time;
  document.getElementById("level").textContent = level;
  document.getElementById("certId").textContent = "ID: " + id;
  document.getElementById("date").textContent = date;
})();
</script>
</body>
</html>
